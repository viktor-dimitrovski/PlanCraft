:root{
  --ng-lanesW: 320px;
  --ng-headerH0: 35px;
  --ng-headerH1: 32px;
  --ng-headerH2: 28px;
  --ng-laneH: 67px;
  --ng-colW: 96px;
  --ng-stroke: #e5e7eb;
  --ng-accent: #2563eb;
  --ng-footerH: 80px;
}

/* layout */
.ng-shell{
  display:grid;
  grid-template-columns: auto 1fr;
  grid-template-rows: auto 1fr;
  height: 100%;
}
.ng-toolbar{
  grid-column: 1 / span 2;
  grid-row: 1;
  display:flex; align-items:center; gap:12px; padding:8px 10px; border-bottom:1px solid var(--ng-stroke);
  background:#f8fafc;
}
.ng-gridWrap{ grid-column: 2; grid-row: 2; min-width:0; position:relative; }
.ng-left{ padding:8px; height:100%; overflow-y:auto; }
aside{ display:flex; flex-direction:column; }
aside{ grid-column:1; grid-row:2; border-right:1px solid var(--ng-stroke); background:#fff; }

/* body */
.ng-scroll, .ng-body, .ng-shell { background: #fff; }
.ng-scroll{
  overflow-x: scroll;  /* секогаш покажи хор. скрол */
  overflow-y: auto;
  height:100%;
  position: relative; 
  padding-bottom: var(--ng-footerH); /* keep horizontal bar above footer */
  scrollbar-gutter: stable both-edges;
}

.ng-body{
  display:grid;
  grid-template-columns: var(--ng-lanesW) 1fr;
  min-width: 900px;
  align-items: start; /* prevent grid's default stretch from breaking sticky */
}

/* left */
.ng-bodyLeft{
  border-right:1px solid var(--ng-stroke);
  background:#fff;
  position: sticky;   /* keep People column visible on horizontal scroll */
  left: 0;
  z-index: 9;
  align-self: start;  /* critical inside CSS Grid */
  width: var(--ng-lanesW);
  min-width: var(--ng-lanesW);    /* lock width so it doesn't compress */
}

.ng-headerH1{ height:var(--ng-headerH0); border-bottom:1px solid var(--ng-stroke); }
.ng-headerH2{ height:var(--ng-headerH2); border-bottom:1px solid var(--ng-stroke); }
.people .ng-person{ height:var(--ng-laneH); display:flex; align-items:center; padding:0 12px; border-bottom:1px solid rgba(2,6,23,.06); }
.ng-lane--over{ background: rgba(37,99,235,.08); }

/* right */
.ng-bodyRight{ position:relative; }
.ng-months{ display:grid; border-bottom:1px solid var(--ng-stroke); background:#fff; }
.ng-month{ font-weight:600; padding:6px 8px; border-right:1px solid var(--ng-stroke); }
.ng-cols{ display:grid; border-bottom:1px solid var(--ng-stroke); background:#fff; }
.ng-colHead{ height:var(--ng-headerH2); display:flex; align-items:center; justify-content:flex-start; border-right:1px solid var(--ng-stroke); padding:0 8px; }
.ng-colLabel{ font-size:12px; color:#334155; }

/* grid background */
.ng-gridBg{ display:grid; }
.ng-bgCol{ border-right:1px solid rgba(2,6,23,.06); }
.ng-laneRow{ height:var(--ng-laneH); border-bottom:1px solid rgba(2,6,23,.06); }

/* non-work soft */
.ng-nonworkLayer{ display:none; } /* enable if needed */

/* task layer */
.ng-taskLayer{
  position:absolute; left:0; right:0;
  top: calc(var(--ng-headerH1) + var(--ng-headerH2));
  bottom: var(--ng-footerH);
  pointer-events: none;
}

/* sidebar phases */
.ng-phases .bank{ margin-bottom:6px; }
.bankBtn,.projBtn{ width:100%; text-align:left; padding:6px 8px; border:1px solid var(--ng-stroke); background:#fff; border-radius:6px; margin:6px 0 4px; }
.dot{ width:10px; height:10px; border-radius:50%; display:inline-block; margin-right:8px; }
.count{ float:right; color:#64748b; }
.phaseList{ display:flex; flex-direction:column; gap:4px; padding-left:8px; }
.phaseItem{ border:1px solid var(--ng-stroke); border-left:3px solid var(--ng-accent); border-radius:8px; padding:6px 8px; background:#fff; cursor:grab; }
.phaseItem.dragging{ opacity:.7; }

/* toolbar small */
.ng-btn{ padding:6px 10px; border:1px solid var(--ng-stroke); border-radius:6px; background:#fff; cursor:pointer; }
.ng-select,.ng-input{ padding:6px 10px; border:1px solid var(--ng-stroke); border-radius:6px; background:#fff; }
.ng-pill{ display:flex; align-items:center; gap:8px; }
.ng-label{ color:#475569; font-size:12px; }

/* ghost */
.ng-ghostCard{ padding:8px 10px; border-left:4px solid var(--ng-accent); background:white; box-shadow:0 8px 24px rgba(0,0,0,.2); border-radius:10px; }
.ng-ghostTitle{ font-weight:600; font-size:13px; }


:root{ --ng-assignment-yshift: 0px; } /* користено за вертикално центрирање */

.ng-taskLayer{ position:absolute; left:0; right:0; top:calc(var(--ng-headerH1) + var(--ng-headerH2)); bottom:0; pointer-events:none; }
.ng-taskLayer *{ pointer-events:auto; }

.ng-assignment{
  position:absolute;
  height: calc(var(--ng-laneH) - 12px);
  border:4px solid var(--ng-stroke);
  border-left:4px solid var(--ng-accent);
  border-radius:10px;
  background:#fff;
  box-shadow:0 2px 8px rgba(0,0,0,.08);
  padding:6px 8px;
  /* centriranje okolu mid-line откако TaskLayer дава top = laneCenter */
  transform: translateY(calc(-50% + var(--ng-assignment-yshift))); /* match TaskLayer */
  will-change: transform;
  overflow:hidden;
  white-space:nowrap;
  text-overflow:ellipsis;
}

.ng-assignmentDragHandle{ position:absolute; left:0; top:0; bottom:0; width:6px; cursor:grab; opacity:.35; }
.ng-assignmentTitle {
  font-size: 13px;
  font-weight: 600;
  white-space: normal;    /* allow wrapping */
  line-height: 1.3;
}

.ng-assignment--warn{ background:#fff7ed; border-left-color:#f59e0b; }
.ng-assignment--selected{ outline:2px solid #94a3b8; outline-offset:1px; }
.ng-assignment--dragging{ opacity:.9; }

/* tooltip од TaskLayer.jsx */
.ng-tooltip{
  position:absolute;
  transform: translate(-50%, -100%);
  margin-top:-8px;
  background:#0f172a; color:#fff;
  border-radius:10px; padding:10px 12px;
  box-shadow:0 10px 24px rgba(0,0,0,.25);
  white-space:nowrap; pointer-events:none; z-index:50;
}
.ng-tooltip__title{ font-weight:600; margin-bottom:4px; }
.ng-tooltip__meta{ font-size:12px; opacity:.85; }
.ng-tooltip__keys{ font-size:12px; opacity:.7; font-style:italic; margin-top:4px; }
.ng-dropPreview{
  position:absolute;
  background: rgba(37,99,235,.12);
  border: 2px dashed rgba(37,99,235,.45);
  border-radius: 10px;
  pointer-events: none;
  /* make the preview feel attached to the dragged card */
  transition: left 60ms linear, top 60ms linear, width 60ms linear;
}
.ng-splitPrompt{
  position: fixed;
  z-index: 60;
  background:#fff;
  border:1px solid rgba(2,6,23,.1);
  border-radius:10px;
  box-shadow:0 12px 32px rgba(0,0,0,.18);
  padding:10px 12px;
  min-width:220px;
}
.ng-splitPrompt__row{ display:flex; align-items:center; gap:8px; margin-top:6px; }
.ng-splitPrompt input[type="number"]{ width:72px; padding:4px 6px; }
.ng-splitPrompt button{ padding:6px 10px; border-radius:8px; border:1px solid rgba(2,6,23,.12); background:#f8fafc; cursor:pointer; }
.ng-splitPrompt button.primary{ background:#2563eb; color:#fff; border-color:#2563eb; }




/* ===== PhaseSidebar layout (title + right-aligned badge) ===== */
.phaseItem{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:8px;
  padding:6px 8px;
  border-radius:8px;
}
.phaseItem.dragging{ opacity:.85; }
.phaseItem.depleted{ opacity:.55; }
.phaseItem .phaseTitle{
  overflow:hidden;
  text-overflow:ellipsis;
  white-space:nowrap;
}
.phaseItem .phaseDays{
  font-size:12px;
  opacity:.8;
  white-space:nowrap;
  flex-shrink:0;
}

/* ===== Sidebar hierarchy clarity ===== */
.ng-phases .bankRow{
  display:grid;
  grid-template-columns: 1fr auto;
  align-items:center;
  gap:6px;
}
.ng-phases .projRow{
  display:grid;
  grid-template-columns: 1fr auto;
  align-items:center;
  gap:6px;
}
.ng-phases .bankBtn{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:10px;
  width:100%;
  font-weight:600;
  background:#f8fafc;
  padding:8px 10px;
  border-radius:10px;
}
.ng-phases .projBtn{ min-width:0; } /* allow text to ellipsis */
.ng-phases .projRow .phaseList{
  /* grid-column: 1 / -1;   take full width below the row */
  margin-left: 6px;
  padding-left: 10px;
  border-left: 2px solid rgba(2,6,23,.06);
}
.ng-phases .dot{
  width:10px;
  height:10px;
  border-radius:9999px;
  display:inline-block;
}
.ng-phases .count{
  background:#e2e8f0;
  border-radius:9999px;
  padding:0 6px;
  font-size:12px;
}
.ng-phases .phaseList{
  border-left:2px solid rgba(2,6,23,.06);
  padding-left:10px;
  margin-left:6px;
}

/* ===== Grid lines slightly stronger ===== */
.ng-bgCol{ border-right:1px solid rgba(2,6,23,.16); }
.ng-laneRow{ border-bottom:1px solid rgba(2,6,23,.16); }

/* ===== Card bank accent (expects inline --ng-accent from task.color) ===== */
.ng-assignment{ border-left:3px solid var(--ng-accent, #2563eb); }


/* ===== Today marker (red vertical line + nub) ===== */
.ng-today{
  position:absolute;
  top: calc(var(--ng-headerH1));
  bottom: 0;
  width:2px;
  background:#ef4444; /* red-500 */
  transform: none;
  pointer-events:none;
  z-index: 5;
}
/* .ng-today-nub{
  position:absolute;
  top: calc(var(--ng-headerH1) - 30px);
  width:10px; height:10px;
  border-radius:9999px;
  background:#ef4444;
  transform: translate(-4px, -50%);
  pointer-events:none;
  z-index: 6;
} */
.ng-today::before {
  content:"";
  position:absolute;
  top: 0;
  left: 50%;
  width: 10px; height: 10px;
  border-radius: 9999px;
  background:#ef4444;
  transform: translate(-50%, -50%);
  box-shadow: 0 0 0 2px #fff inset;
}


/* ===== Card style: compact variant ===== */
.ng-style-compact .ng-assignment{
  height: calc(var(--ng-laneH) - 18px);
  border-radius: 8px;
  box-shadow: 0 1px 3px rgba(0,0,0,.06);
  padding: 4px 6px;
}
.ng-style-compact .ng-assignmentTitle{ font-size: 12px; }





/* ===== New style variant: SLIM & CONTRAST =====
   - visual inset 2px left/right (no touching at full-week width)
   - vertically centered, wrapped title
   - meta row for duration and % complete
   - subtle progress fill
*/
.ng-style-slim .ng-assignmentInner{
  position: relative;
  height: 100%;
  margin: 0 2px;                   /* 2px inset left/right */
  border-radius: 8px;
  background: #fff;
  box-shadow: 0 2px 6px rgba(0,0,0,.06);
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;         /* vertical center */
  padding: 6px 8px;
  text-align: center;
  overflow: hidden;
}
.ng-style-slim .ng-assignment{ border: 1px solid var(--ng-stroke); border-left-width: 3px; }
.ng-style-slim .ng-assignmentTitle{
  font-size: 12px;
  line-height: 1.2;
  white-space: normal;             /* allow wrap */
  word-break: break-word;
  max-height: calc(100% - 18px);   /* leave room for meta */
}
.ng-style-slim .ng-assignmentMeta{
  margin-top: 4px;
  font-size: 11px;
  color: #475569;
  opacity: .9;
}
.ng-assignmentMeta {
  font-size: 12px;
  margin-top: 4px;
  color: #475569;
}

/* progress background (uses --ng-progress-pct inline) */
.ng-style-slim .ng-assignmentInner::before{
  content: "";
  position: absolute; inset: 0;
  background: linear-gradient(90deg,
    rgba(37,99,235,.10) var(--ng-progress-pct, 0%),
    transparent var(--ng-progress-pct, 0%)
  );
  pointer-events: none;
}
/* alternate stronger high-contrast option */
.ng-style-contrast .ng-assignmentInner{
  margin: 0 2px;
  height: 100%;
  border-radius: 10px;
  background: linear-gradient(180deg,#ffffff, #f8fafc);
  border: 1px solid rgba(2,6,23,.10);
  box-shadow: 0 3px 10px rgba(0,0,0,.08);
  display:flex; flex-direction:column; align-items:center; justify-content:center;
  padding: 6px 8px; text-align:center; overflow:hidden;
}
.ng-style-contrast .ng-assignmentTitle{ white-space: normal; word-break: break-word; }
.ng-style-contrast .ng-assignmentMeta{ margin-top: 4px; font-size: 11px; color:#475569; }
.ng-style-contrast .ng-assignmentInner::before{
  content:""; position:absolute; inset:0;
  background: linear-gradient(90deg, rgba(16,185,129,.12) var(--ng-progress-pct, 0%), transparent var(--ng-progress-pct, 0%));
  pointer-events:none;
}



/* ===== Card style: CLARITY (recommended for dense grids) =====
   - Larger readable font but compact
   - 2px side inset (no touching at full-week)
   - Strong full-outline + colored left rail
   - Two-line title (centered) + meta row
   - Bottom progress bar (uses --ng-progress-pct)
*/
.ng-style-clarity .ng-assignment{
  height: calc(var(--ng-laneH) - 14px);
  border-radius: 10px;
  padding: 0;
  background: #fff;
  border: 1px solid rgba(2,6,23,.14);               /* clearer outline */
  box-shadow: 0 1px 2px rgba(0,0,0,.05);
}
.ng-style-clarity .ng-assignment{ border-left: 4px solid var(--ng-accent, #2563eb); }

.ng-style-clarity .ng-assignmentInner{
  position: relative;
  height: 100%;
  margin: 0 2px;                                    /* 2px inset left/right */
  display: grid;
  grid-template-rows: 1fr auto;
  align-items: center;
  justify-items: center;
  text-align: center;
  padding: 6px 8px;
  overflow: hidden;
}
.ng-style-clarity .ng-assignmentTitle{
  font-size: 13px;
  font-weight: 600;
  line-height: 1.15;
  letter-spacing: -0.01em;
  white-space: normal;                               /* wrap allowed */
  word-break: break-word;
  max-height: calc(100% - 18px);
}
.ng-style-clarity .ng-assignmentMeta{
  margin-top: 4px;
  font-size: 11px;
  color: #475569;
  opacity: .95;
}

/* thin bottom progress bar */
.ng-style-clarity .ng-assignmentInner::after{
  content: "";
  position: absolute;
  left: 4px; right: 4px; bottom: 4px;
  height: 3px;
  border-radius: 2px;
  background:
    linear-gradient(90deg, var(--ng-accent, #2563eb) var(--ng-progress-pct, 0%), transparent var(--ng-progress-pct, 0%)),
    linear-gradient(90deg, rgba(2,6,23,.08) 0%, rgba(2,6,23,.08) 100%);
  pointer-events: none;
}

/* === Freeze panes: left People + top Months/Cols ======================= */
/* Keep the left people block visible on horizontal scroll (still scrolls vertically) */


/* Pin top month band */
.ng-months{
  position: sticky;
  top: 0;
  z-index: 6;           /* below column headers, above grid */
  background: #fff;
  height: var(--ng-headerH1);  /* matches task layer math */
}

/* Pin column headers just under months */
.ng-cols{
  position: sticky;
  top: var(--ng-headerH1);
  z-index: 7;           /* above months & today line */
  background: #fff;
}

/* Left-side header placeholders should mirror the sticky top rows */
.ng-headerH1{
  position: sticky;
  top: 0;
  z-index: 7;
  background: #fff;
}
.ng-headerH2{
  position: sticky;
  top: var(--ng-headerH1);
  z-index: 7;
  background: #fff;
}

/* === Layout hardening (no global scroll) === */
html, body, #root { height: 100vh; overflow: hidden; }
.ng-shell { height: 100vh; } /* наместо 100% */
.ng-gridWrap { padding-bottom: 96px; } /* ~80px footer + мал buffer */
/* Fixed footer strip */
.ng-footer{
  position:fixed; left:0; right:0; bottom:0; z-index:70;
  background:#fff; border-top:1px solid #e5e7eb; padding:8px 12px;
}
/* Optional ако сакаш да избегнеш inline style во toast, но сега е вграден во компонентата */
.ng-footer .ng-toast{ position:absolute; right:0; bottom:0; }

/* Footer height variable (controls layout offsets) */
:root { --ng-footerH: 80px; } /* target ~80px outer height */

/* The scroll area must leave room for footer and keep the h-scroll visible */
.ng-scroll{
  overflow-x: scroll;       /* always show horizontal scroll */
  overflow-y: auto;
  height: 100%;
  position: relative;
  padding-bottom: var(--ng-footerH); /* reserve space so bar is above footer */
  scrollbar-gutter: stable both-edges; /* no layout jump when bars appear */
}

/* Task layer should stop above the footer */
.ng-taskLayer{
  position: absolute; left: 0; right: 0;
  top: calc(var(--ng-headerH1) + var(--ng-headerH2));
  bottom: var(--ng-footerH);
  pointer-events: none;
}
.ng-taskLayer *{ pointer-events: auto; }

/* Fixed footer strip */
.ng-footer{
  position: fixed; left: 0; right: 0; bottom: 0; z-index: 70;
  height: var(--ng-footerH);
  display: flex; align-items: center; gap: 12px;
  padding: 8px 12px; background: #fff; border-top: 1px solid #e5e7eb;
}

/* When hidden: collapse to 0 without layout jitter */
.ng-footer--hidden { display: none; }

.bankSel,.projSel{
  width:22px; height:22px; border-radius:6px;
  border:1px solid var(--ng-stroke); background:#fff; cursor:pointer;
  position:relative; flex-shrink:0;
}
.bankRow.is-selected .bankSel::after,
.projRow.is-selected .projSel::after{
  content:"✓"; position:absolute; inset:0; display:flex; align-items:center; justify-content:center;
  font-size:13px;
}
.projRow{ display:flex; align-items:center; gap:6px; }